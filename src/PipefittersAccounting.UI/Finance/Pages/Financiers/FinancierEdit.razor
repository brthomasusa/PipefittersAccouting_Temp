@page "/Finance/Pages/Financiers/FinancierEdit/{FinancierId:guid}"
@inject ILogger<FinancierEdit> logger
@inject PipefittersAccounting.UI.Validators.Financing.FinancierWriteModelValidator _validator

<PageTitle>Financier Edit</PageTitle>

<ErrorBoundary>
    <Row>
        <Column>
            <Card Margin="Margin.Is4.OnY">
                <CardHeader>
                    <Heading TextColor="TextColor.Muted" Size="HeadingSize.Is4"
                        Margin="Margin.Is3.FromStart.Is2.FromTop">
                        Financier Edit
                    </Heading>
                </CardHeader>
                <CardBody>
                    @if (_financierDetailModel is not null)
                    {
                        <Validations @ref="_validations" Mode="ValidationMode.Auto" ValidateOnLoad
                        Model="@_financierDetailModel">
                            <Validation HandlerType="HandlerTypes.FluentValidation">
                                <Field>
                                    <FieldLabel>Financier Name</FieldLabel>
                                    <TextEdit Placeholder="Required" @bind-Text=@_financierDetailModel.FinancierName>
                                        <Feedback>
                                            <ValidationError />
                                        </Feedback>
                                    </TextEdit>
                                </Field>
                            </Validation>
                            <Validation HandlerType="HandlerTypes.FluentValidation">
                                <Field>
                                    <FieldLabel>Telephone</FieldLabel>
                                    <TextEdit Placeholder="Required" @bind-Text=@_financierDetailModel!.Telephone>
                                        <Feedback>
                                            <ValidationError />
                                        </Feedback>
                                    </TextEdit>
                                </Field>
                            </Validation>
                            <Validation HandlerType="HandlerTypes.FluentValidation">
                                <Field>
                                    <FieldLabel>Address Line1</FieldLabel>
                                    <TextEdit Placeholder="Required" @bind-Text=@_financierDetailModel!.AddressLine1>
                                        <Feedback>
                                            <ValidationError />
                                        </Feedback>
                                    </TextEdit>
                                </Field>
                            </Validation>
                            <Validation HandlerType="HandlerTypes.FluentValidation">
                                <Field>
                                    <FieldLabel>Address Line2</FieldLabel>
                                    <TextEdit @bind-Text=@_financierDetailModel!.AddressLine2>
                                        <Feedback>
                                            <ValidationError />
                                        </Feedback>
                                    </TextEdit>
                                </Field>
                            </Validation>
                            <Validation HandlerType="HandlerTypes.FluentValidation">
                                <Field>
                                    <FieldLabel>City</FieldLabel>
                                    <TextEdit Placeholder="Required" @bind-Text=@_financierDetailModel!.City>
                                        <Feedback>
                                            <ValidationError />
                                        </Feedback>
                                    </TextEdit>
                                </Field>
                            </Validation>
                            <Validation HandlerType="HandlerTypes.FluentValidation">
                                <Field>
                                    <FieldLabel>State</FieldLabel>
                                    <TextEdit Placeholder="Required" @bind-Text=@_financierDetailModel!.StateCode>
                                        <Feedback>
                                            <ValidationError />
                                        </Feedback>
                                    </TextEdit>
                                </Field>
                            </Validation>
                            <Validation HandlerType="HandlerTypes.FluentValidation">
                                <Field>
                                    <FieldLabel>Zipcode</FieldLabel>
                                    <TextEdit Placeholder="Required" @bind-Text=@_financierDetailModel!.Zipcode>
                                        <Feedback>
                                            <ValidationError />
                                        </Feedback>
                                    </TextEdit>
                                </Field>
                            </Validation>
                            <Validation HandlerType="HandlerTypes.FluentValidation">
                                <Field>
                                    <FieldLabel>Contact First Name</FieldLabel>
                                    <TextEdit Placeholder="Required" @bind-Text=@_financierDetailModel!.ContactFirstName>
                                        <Feedback>
                                            <ValidationError />
                                        </Feedback>
                                    </TextEdit>
                                </Field>
                            </Validation>
                            <Validation HandlerType="HandlerTypes.FluentValidation">
                                <Field>
                                    <FieldLabel>Contact Last Name</FieldLabel>
                                    <TextEdit Placeholder="Required" @bind-Text=@_financierDetailModel!.ContactLastName>
                                        <Feedback>
                                            <ValidationError />
                                        </Feedback>
                                    </TextEdit>
                                </Field>
                            </Validation>
                            <Validation HandlerType="HandlerTypes.FluentValidation">
                                <Field>
                                    <FieldLabel>Contact Middle Initial</FieldLabel>
                                    <TextEdit @bind-Text=@_financierDetailModel!.ContactMiddleInitial>
                                        <Feedback>
                                            <ValidationError />
                                        </Feedback>
                                    </TextEdit>
                                </Field>
                            </Validation>
                            <Validation HandlerType="HandlerTypes.FluentValidation">
                                <Field>
                                    <FieldLabel>Contact Telephone</FieldLabel>
                                    <TextEdit Placeholder="Required" @bind-Text=@_financierDetailModel!.ContactTelephone>
                                        <Feedback>
                                            <ValidationError />
                                        </Feedback>
                                    </TextEdit>
                                </Field>
                            </Validation>
                            <Validation HandlerType="HandlerTypes.FluentValidation">
                                <Field>
                                    <FieldLabel>Status</FieldLabel>
                                    <RadioGroup TValue="bool" Name="Status" Color="Color.Primary"
                                    @bind-CheckedValue=@_financierDetailModel!.IsActive>
                                        <ChildContent>
                                            <Radio Value="@(true)">Active</Radio>
                                            <Radio Value="@(false)">Inactive</Radio>
                                        </ChildContent>
                                        <Feedback>
                                            <ValidationError>You must select active or inactive!</ValidationError>
                                        </Feedback>
                                    </RadioGroup>
                                </Field>
                            </Validation>
                        </Validations>

                        <Field Margin="Margin.Is4.FromTop">
                            <Button Color="Color.Success" Clicked="Save">Save changes</Button>
                            <Button Color="Color.Secondary">Cancel editing</Button>
                        </Field>
                    }
                    else
                    {
                        <div class="d-flex justify-content-center">
                            <div class="spinner-border" style="width: 3rem; height: 3rem;" role="status">
                                <span class="visually-hidden">Loading...</span>
                            </div>
                        </div>
                    }

                </CardBody>
                <CardFooter>
                    <Button Color="Color.Primary" Outline Type="ButtonType.Link"
                        To="Finance/Pages/Financiers/Financiers">
                        <span class="btn-label"><i class="fas fa-angle-double-left"></i></span>
                    </Button>
                </CardFooter>
            </Card>
        </Column>
    </Row>
</ErrorBoundary>
