@page "/Finance/Pages/Financiers/Financiers"
@using PipefittersAccounting.UI.Components.Common
@inject ILogger<Financiers> logger

<PageTitle>Financiers</PageTitle>

<Heading TextColor="TextColor.Muted" Size="HeadingSize.Is4" Margin="Margin.Is3.FromStart.Is2.FromTop">
    Financiers
</Heading>

<Row>
    <Column>
        <Card Margin="Margin.Is4.OnY">
            <CardHeader>
                <div class="row align-items-center">
                    <div class="col-md-2">
                        <Button class="rounded-pill" Color="Color.Primary" Size="Size.ExtraLarge" Type="ButtonType.Link"
                            To="Finance/Pages/Financiers/FinancierCreate" Outline>+</Button>
                    </div>
                    <div class="col-md-5">
                        <SingleFieldGridSearch PlaceHolderText=@_placeHolderTextForSearch
                            OnSearchTermChangedEventHandler=@SearchChanged />
                    </div>
                </div>
            </CardHeader>
            <CardBody>
                @if (_financierList is not null && _financierList.Any())
                {
                    <BasicGrid Items=_financierList>
                        <TableHeader>
                            <th>Name</th>
                            <th>Telephone</th>
                            <th>Contact</th>
                            <th>Contact Tel.</th>
                            <th>Active</th>
                            <th>Actions</th>
                        </TableHeader>
                        <RowTemplate Context="financier">
                            <td>@financier.FinancierName</td>
                            <td>@financier.Telephone</td>
                            <td>@financier.ContactFullName</td>
                            <td>@financier.ContactTelephone</td>
                            <td>@(financier.IsActive ? "Yes" : "No")</td>
                            <td>
                                <Dropdown Direction="Direction.Up">
                                    <DropdownToggle Outline Size="Size.ExtraSmall" Color="Color.Primary">
                                        ...
                                    </DropdownToggle>
                                    <DropdownMenu class="border border-primary rounded-3 shadow-lg">
                                        <DropdownItem
                                        Clicked="@( () => OnMenuItemClicked("Details", @financier.FinancierId) )">
                                            Details
                                        </DropdownItem>
                                        <DropdownItem
                                        Clicked="@( () => OnMenuItemClicked("Edit", @financier.FinancierId) )">
                                            Edit
                                        </DropdownItem>
                                        <DropdownItem
                                        Clicked="@( () => OnMenuItemClicked("Delete", @financier.FinancierId) )">
                                            Delete
                                        </DropdownItem>
                                    </DropdownMenu>
                                </Dropdown>
                            </td>
                        </RowTemplate>
                    </BasicGrid>
                }
                else
                {
                    <span>Loading financier list...</span>
                }
            </CardBody>
            <CardFooter>
                <CascadingValue Name="MetaData" Value=@_metaData>
                    <CascadingValue Name="PagerChangedEventHandler" Value=@_pagerChangedEventHandler>
                        <DynamicPager />
                    </CascadingValue>
                </CascadingValue>
            </CardFooter>
        </Card>
    </Column>
</Row>
